<!-- templates/main/home.html -->
{% extends 'base.html' %}
{% load static %}


{% block title %}ReRoute | Home{% endblock %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/home.css' %}">


<!-- Login Status Message -->
<div style="text-align: center; margin-top: 1rem;">
    {% if user.is_authenticated %}
        <p>You are logged in as <strong>{{ user.username }}</strong>.</p>
    {% else %}
        <p>You are not logged in.</p>
    {% endif %}
</div>


<section class="hero">
    <div class="hero-content">
        <h1>Rebuild. Reclaim. ReRoute.</h1>
        <div class="sub-hero">
            <p><span class="highlight">Rebuild</span> people's views of formerly incarcerated individuals as we help them,</p>
            <p><span class="highlight">Reclaim</span> their place in society in order to</p>
            <p><span class="highlight">ReRoute</span> their future.</p>
        </div>
        <a href="{% url 'signup' %}" class="cta-button">Get Started</a>
    </div>
</section>

<section id="mission" class="mission">
    <div class="mission-content">
        <h2>Our Mission</h2>
        <p>At ReRoute, our mission is to support formerly incarcerated individuals through job readiness, training, and resume building. We aim to shift societal views while giving our clients a meaningful pathway forward.</p>
    </div>
</section>

<section id="vision" class="vision-split">
  <div class="vision-inner" style="--vision-overlay: rgba(0,109,160,0.92); --vision-bg: var(--neutral-gray); --vision-min-h: 80vh;">
    <div class="vision-left">
      <h2>Our Vision</h2>
      <p>At ReRoute, our vision is to break down the stigma surrounding men and women navigating the reentry process. We are building a community that embraces second chances, a space where individuals once shut out by society are supported, not judged.</p>
      <p>ReRoute exists to rebuild trust, restore dignity, and reshape how we view justice-involved individuals. We believe it takes a village not only to raise a child, but to uplift our mothers, fathers, siblings, and neighbors who deserve another shot at life.</p>
      <p>As we grow, we aspire to expand our support through access to technology, education, trade certifications, therapy and personal development, paving new pathways to purpose and opportunity.</p>
      <div class="vision-actions">
        <a href="{% url 'about_us' %}" class="vision-btn" aria-label="Learn more about ReRoute">Learn More</a>
      </div>
    </div>
    <div class="vision-right" style="--vision-image: url('{% static 'images/jaycoffer.jpg' %}'); --vision-image-pos-y: 78%; --vision-image-pos-x: 52%;"></div>
  </div>
  
</section>

<!-- =========================
     Blog Section — Featured + Recent or Teaser Empty State
     ========================= -->
<section class="blog-section">
  {% if featured_posts or recent_posts %}
    <!-- Hero Carousel (intro slide + featured; fallback to first recent) -->
    <div class="slider-container blog-hero">
      <div class="slides-wrapper" id="slidesWrapper">
        <!-- Intro slide doubles as section header -->
        <article class="slide hero-slide intro-slide">
          <div class="hero-media" style="background-image:url('{% static 'images/your_voice.jpg' %}');"></div>
          <div class="hero-overlay"></div>
          <div class="hero-content">
            <div class="hero-tagline">Your Voice Matters</div>
            <h2 class="hero-kicker">Our Blog</h2>
            <p class="hero-excerpt">Insights, stories, and resources from the ReRoute team.</p>
            <a href="{% url 'blog_list' %}" class="hero-btn">View Posts</a>
          </div>
        </article>
        {% if featured_posts %}
          {% for post in featured_posts %}
            <article class="slide hero-slide">
              <div class="hero-media" style="background-image:url('{% if post.image %}{{ post.image.url }}{% else %}{% static 'images/your_voice.jpg' %}{% endif %}');"></div>
              <div class="hero-overlay"></div>
              <div class="hero-content">
                <h3 class="hero-title">{{ post.title }} <span class="badge-soon">Coming Soon</span></h3>
                <p class="hero-excerpt">{{ post.content|truncatechars:140 }}</p>
                {% url 'blog_detail' slug=post.slug as blog_url %}
                {% if blog_url %}
                  <a href="{{ blog_url }}" class="hero-btn">Read More</a>
                {% endif %}
              </div>
            </article>
          {% endfor %}
        {% else %}
          {% for post in recent_posts|slice:':1' %}
            <article class="slide hero-slide">
              <div class="hero-media" style="background-image:url('{% if post.image %}{{ post.image.url }}{% else %}{% static 'images/your_voice.jpg' %}{% endif %}');"></div>
              <div class="hero-overlay"></div>
              <div class="hero-content">
                <h3 class="hero-title">{{ post.title }} <span class="badge-soon">Coming Soon</span></h3>
                <p class="hero-excerpt">{{ post.content|truncatechars:140 }}</p>
                {% url 'blog_detail' slug=post.slug as blog_url %}
                {% if blog_url %}
                  <a href="{{ blog_url }}" class="hero-btn">Read More</a>
                {% endif %}
              </div>
            </article>
          {% endfor %}
        {% endif %}
      </div>

      <button type="button" class="slider-btn prev" aria-label="Previous slide">
        <span class="arrow-triangle left"></span>
      </button>
      <button type="button" class="slider-btn next" aria-label="Next slide">
        <span class="arrow-triangle right"></span>
      </button>
    </div>
    <div class="slider-dots" id="sliderDots"></div>

    <!-- Recent posts row -->
    {% if recent_posts %}
      <div class="recent-row">
        {% for post in recent_posts %}
          <article class="post-card">
            {% if post.image %}
              <a href="{% url 'blog_detail' slug=post.slug %}" class="post-media" style="background-image:url('{{ post.image.url }}');" aria-label="{{ post.title }}"></a>
            {% else %}
              <a href="{% url 'blog_detail' slug=post.slug %}" class="post-media post-media--logo" style="background-image:url('{% static 'images/reroute-trans-logo.png' %}');" aria-label="{{ post.title }}"></a>
            {% endif %}
            <div class="post-body">
              <h4 class="post-title"><a href="{% url 'blog_detail' slug=post.slug %}">{{ post.title }}</a> <span class="badge-soon">Coming Soon</span></h4>
              <p class="post-excerpt">{{ post.content|truncatechars:110 }}</p>
              <a href="{% url 'blog_detail' slug=post.slug %}" class="post-link">Read More →</a>
            </div>
          </article>
        {% endfor %}
      </div>
    {% endif %}

    <div class="blog-header" style="margin-top:1rem;">
      <a href="{% url 'blog_list' %}" class="view-all-link">View all blog posts</a>
    </div>

  {% else %}
    <!-- Teaser Carousel with immersive images -->
    <div class="slider-container blog-hero">
      <div class="slides-wrapper" id="slidesWrapper">
        <!-- Intro slide doubles as section header in empty state -->
        <article class="slide hero-slide intro-slide">
          <div class="hero-media" style="background-image:url('{% static 'images/your_voice.jpg' %}');"></div>
          <div class="hero-overlay"></div>
          <div class="hero-content">
            <div class="hero-tagline">Your Voice Matters</div>
            <h2 class="hero-kicker">Our Blog</h2>
            <p class="hero-excerpt">We’re working on insightful stories and resources. Subscribe to be the first to read them.</p>
            <a href="{% url 'blog_list' %}" class="hero-btn">View Posts</a>
          </div>
        </article>
        <article class="slide hero-slide">
          <div class="hero-media hero-media--logo" style="background-image:url('{% static 'images/reroute-trans-logo.png' %}');"></div>
          <div class="hero-overlay"></div>
          <div class="hero-content">
            <h3 class="hero-title">Resources that make a difference</h3>
            <p class="hero-excerpt">We’re crafting practical guides you can use right away.</p>
            <a href="{% url 'blog_list' %}" class="hero-btn">View Posts</a>
          </div>
        </article>
      </div>
      <button type="button" class="slider-btn prev" aria-label="Previous slide">
        <span class="arrow-triangle left"></span>
      </button>
      <button type="button" class="slider-btn next" aria-label="Next slide">
        <span class="arrow-triangle right"></span>
      </button>
    </div>
    <div class="slider-dots" id="sliderDots"></div>

    <!-- Removed duplicate Notify Me CTA under the carousel per request -->
  {% endif %}
</section>


<section id="features" class="features">
    <div class="feature">
        <h2>Tech Training</h2>
        <p>Gain in-demand skills through certified bootcamps and workshops.</p>
    </div>
    <div class="feature">
      <h2><a href="{% url 'resumes:resume_welcome' %}" class="feature-link">Resume Help</a></h2>
      <p>Build standout resumes with expert guidance and AI tools.</p>
  </div>
    <div class="feature">
        <h2><a href="{% url 'dashboard:matched_jobs' %}" class="feature-link">Job Matching</a></h2>
        <p>Connect with employers open to second-chance hiring.</p>
    </div>
</section>

<script src="{% static 'js/home.js' %}"></script>
{% endblock %}
