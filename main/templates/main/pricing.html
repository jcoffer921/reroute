{% extends "base.html" %}
{% load static %}

{% block title %}ReRoute | Pricing{% endblock %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/settings.css' %}"> {# base card + buttons #}
<link rel="stylesheet" href="{% static 'css/pricing.css' %}"> {# pricing-specific polish #}

<section class="settings-hero">
  <div class="settings-hero-content">
    <h1>Pricing</h1>
    <p>Choose the plan that fits your needs.</p>
  </div>
  <div class="settings-mini-nav">
    <a class="mini-link" href="{% url 'settings' %}">Back to Settings</a>
  </div>
</section>

<div class="settings-container">
  <div class="settings-section pricing-wrap">
    <div class="settings-card pricing-card">
      <div class="settings-card__head pricing-head">
        <div>
          <h3 class="settings-card__title pricing-title">Pick The Best Plan</h3>
          <p class="pricing-sub">Select a plan that fits your needs. You can change plans anytime.</p>
        </div>
      </div>

      <div class="tabs" style="display:flex; gap:8px; margin-bottom:12px;">
        <a href="{% url 'pricing' %}?tab=user" class="btn {% if active_tab == 'user' %}btn-primary{% else %}btn-secondary{% endif %}">Job Seeker</a>
        <a href="{% url 'pricing' %}?tab=employer" class="btn {% if active_tab == 'employer' %}btn-primary{% else %}btn-secondary{% endif %}">Employer</a>
      </div>

      {% if active_tab == 'user' %}
        <div class="pricing-grid">
          <div class="price-card">
            <div class="plan-name">Free</div>
            <div class="plan-underline"></div>
            <div class="price">$0</div>
            <div class="price-sub">Per Month</div>
            <hr class="plan-divider">
            <ul class="plan-features">
              <li>Create a profile</li>
              <li>Upload and manage resumes</li>
              <li>Unlimited applications</li>
              <li>Dashboard access (Jobs, Tips, Settings)</li>
              <li>Verification badge (once approved)</li>
            </ul>
            <div class="settings-card__actions settings-card__actions--footer">
              {% if request.user.is_authenticated %}
                {% if IS_EMPLOYER %}
                  <a href="{% url 'pricing' %}?tab=employer" class="btn btn-secondary btn-pill">View Employer Plans</a>
                {% else %}
                  <a href="{{ DASHBOARD_URL }}" class="btn btn-primary btn-pill">Go to Dashboard</a>
                {% endif %}
              {% else %}
                <a href="{% url 'signup' %}" class="btn btn-primary btn-pill">Get Started Free</a>
              {% endif %}
            </div>
          </div>
        </div>
      {% else %}
        <div class="pricing-grid">
          <div class="price-card">
            <div class="plan-name">Basic</div>
            <div class="plan-underline"></div>
            {% if current_plan == 'basic' %}<div class="plan-badge pill pill--ok">Current Plan</div>{% endif %}
            <div class="price">$50</div>
            <div class="price-sub">Per Month</div>
            <hr class="plan-divider">
            <ul class="plan-features">
              <li>Post up to 5 jobs / month</li>
              <li>Access to candidate database</li>
              <li>Standard analytics</li>
              <li>Email support</li>
            </ul>
            <div class="settings-card__actions settings-card__actions--footer">
              <a href="{% url 'checkout' %}?plan=basic" class="btn btn-primary btn-pill" {% if current_plan == 'basic' %}aria-disabled="true" data-disabled="true"{% endif %}>Choose Basic</a>
            </div>
          </div>

          <div class="price-card card-popular">
            <div class="popular-tag pill pill--info">Most Popular</div>
            <div class="plan-name">Pro</div>
            <div class="plan-underline"></div>
            {% if current_plan == 'pro' %}<div class="plan-badge pill pill--ok">Current Plan</div>{% endif %}
            <div class="price">$99</div>
            <div class="price-sub">Per Month</div>
            <hr class="plan-divider">
            <ul class="plan-features">
              <li>Unlimited job postings</li>
              <li>Advanced analytics</li>
              <li>Priority support</li>
              <li>Interview scheduling</li>
            </ul>
            <div class="settings-card__actions settings-card__actions--footer">
              <a href="{% url 'checkout' %}?plan=pro" class="btn btn-primary btn-pill" {% if current_plan == 'pro' %}aria-disabled="true" data-disabled="true"{% endif %}>Upgrade to Pro</a>
            </div>
          </div>

          <div class="price-card">
            <div class="plan-name">Enterprise</div>
            <div class="plan-underline"></div>
            <div class="plan-badge pill pill--warn">Coming Soon</div>
            <div class="price">$300</div>
            <div class="price-sub">Per Month</div>
            <hr class="plan-divider">
            <ul class="plan-features">
              <li>Unlimited job postings</li>
              <li>Custom analytics dashboard</li>
              <li>Dedicated account manager</li>
              <li>24/7 priority support</li>
              <li>Custom integrations</li>
            </ul>
          </div>
        </div>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
